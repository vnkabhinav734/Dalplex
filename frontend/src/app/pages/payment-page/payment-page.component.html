<!--Author: Falgun Jairaj Thakwani B009302083-->
<main style="position: relative;padding-bottom: 150px;">
<app-header></app-header>
<div class="container">
  <div class="heading">
    <h1>Payment</h1>
    <hr>
    </div>
    <form [formGroup]="billingAddressForm">
  <div class="mat-elevation-z4">
    <div class="billing-add">
      <h1>Billing <Address></Address></h1>

        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" required>
          <mat-error *ngIf="billingAddressForm.controls['name'].invalid">Please enter a name</mat-error>
        </mat-form-field>
        <br>
        <mat-form-field>
          <mat-label>Street No.</mat-label>
          <input matInput formControlName="streetNumber" required>
          <mat-error *ngIf="billingAddressForm.controls['streetNumber'].invalid">Please enter a street number</mat-error>
        </mat-form-field>
        <br>
        <mat-form-field>
          <mat-label>Apt No.</mat-label>
          <input matInput formControlName="aptNumber">
        </mat-form-field>
        <br>
        <mat-form-field>
          <mat-label>City</mat-label>
          <input matInput formControlName="city" required>
          <mat-error *ngIf="billingAddressForm.controls['city'].invalid">Please enter a city</mat-error>
        </mat-form-field>
        <br>
        <mat-form-field>
          <mat-label>Province</mat-label>
          <input matInput formControlName="province" required>
          <mat-error *ngIf="billingAddressForm.controls['province'].invalid">Please enter a province</mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Postal Code</mat-label>
          <input matInput formControlName="pincode" required>
          <mat-error *ngIf="billingAddressForm.controls['pincode'].invalid">Please enter a postal code</mat-error>
        </mat-form-field>

    </div>
    <div class="select-card">
      <h2>Select card</h2>
      <div ><button class="add-card" mat-raised-button color="primary" (click)="showAddPaymentDialog()"><mat-icon>add</mat-icon> Add Card</button></div>

    </div>



    <mat-list>
      <div class="card-main">
      <ng-container  *ngFor="let payment of availablePayments">
        <mat-radio-group [(ngModel)]="selectedOption" [ngModelOptions]="{standalone: true}" (change)="updateSelection($event.value)" >
        <mat-radio-button matInput [value]="payment._id">
          <mat-card>
            <mat-card-content>
              <h1>**** **** **** {{payment.cardnumber.substring(payment.cardnumber.length-4)}}</h1>
              <div class="card-info">
                <div class="card-name">{{ payment.name }}</div>
                <div class="card-expiry">{{ payment.expirydate | date :'MM' }}/{{ payment.expirydate | date :'YY' }}</div>
              </div>
            </mat-card-content>
            <mat-card-footer> <div class="card-footer"><div class="card-cvv">CVV: {{payment.cvv}}</div><div> VISA</div></div> </mat-card-footer>
          </mat-card>
        </mat-radio-button>
      </mat-radio-group>
      </ng-container>
    </div>
    <ng-container *ngIf="isSelected==false"><p class="card-error">Please select a card.</p></ng-container>
    </mat-list>
    <div class="buttons">
      <button class="pay-button" type="submit" mat-raised-button (click)="makePayment()" color="primary"><mat-icon>wallet</mat-icon> Pay</button>
    </div>
  </div>
</form>
</div>
<app-footer></app-footer>
</main>
